<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🤖 SOIPPE AI v6.0 Easy</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #8B5FBF;
            --secondary-color: #6A3093;
            --accent-color: #FFFFFF;
            --background-color: #1a1a2e;
            --text-color: #FFFFFF;
        }

        .theme-purple-white {
            --primary-color: #8B5FBF;
            --secondary-color: #6A3093;
            --accent-color: #FFFFFF;
            --background-color: #1a1a2e;
            --text-color: #FFFFFF;
        }

        .theme-blue-silver {
            --primary-color: #4A90E2;
            --secondary-color: #357ABD;
            --accent-color: #F0F0F0;
            --background-color: #0f1a2e;
            --text-color: #FFFFFF;
        }

        .theme-green-cream {
            --primary-color: #2E8B57;
            --secondary-color: #228B22;
            --accent-color: #FFFDD0;
            --background-color: #1a2e1a;
            --text-color: #FFFFFF;
        }

        .theme-red-gold {
            --primary-color: #DC143C;
            --secondary-color: #B22222;
            --accent-color: #FFD700;
            --background-color: #2e1a1a;
            --text-color: #FFFFFF;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--background-color) 0%, #16213e 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--text-color);
            transition: all 0.3s ease;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            overflow: hidden;
            height: 90vh;
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: var(--accent-color);
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .theme-selector {
            position: absolute;
            top: 15px;
            left: 20px;
            display: flex;
            gap: 5px;
        }

        .theme-btn {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid var(--accent-color);
            cursor: pointer;
            transition: transform 0.2s;
        }

        .theme-btn:hover {
            transform: scale(1.2);
        }

        .theme-btn.purple { background: linear-gradient(135deg, #8B5FBF, #6A3093); }
        .theme-btn.blue { background: linear-gradient(135deg, #4A90E2, #357ABD); }
        .theme-btn.green { background: linear-gradient(135deg, #2E8B57, #228B22); }
        .theme-btn.red { background: linear-gradient(135deg, #DC143C, #B22222); }

        .header h1 {
            font-size: 24px;
            margin-bottom: 8px;
            font-weight: bold;
        }

        .header p {
            opacity: 0.9;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .badge {
            position: absolute;
            top: 15px;
            right: 25px;
            background: rgba(255,255,255,0.2);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            backdrop-filter: blur(10px);
        }

        .controls {
            display: flex;
            gap: 10px;
            padding: 10px 20px;
            background: rgba(255,255,255,0.05);
            border-bottom: 1px solid rgba(255,255,255,0.1);
            justify-content: center;
            align-items: center;
        }

        .control-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            background: rgba(255,255,255,0.1);
            color: var(--text-color);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .control-btn:hover {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            transform: translateY(-2px);
        }

        .control-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .mode-selector {
            display: flex;
            gap: 10px;
            padding: 15px 20px;
            background: rgba(255,255,255,0.05);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .mode-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            background: rgba(255,255,255,0.1);
            color: var(--text-color);
            transition: all 0.3s ease;
        }

        .mode-btn.active {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: var(--accent-color);
        }

        .messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            max-width: 85%;
            padding: 15px 20px;
            border-radius: 18px;
            line-height: 1.5;
            animation: fadeIn 0.3s ease-in;
            position: relative;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user-message {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: var(--accent-color);
            margin-left: auto;
            border-bottom-right-radius: 5px;
        }

        .ai-message {
            background: rgba(255,255,255,0.15);
            color: var(--text-color);
            border-bottom-left-radius: 5px;
            border-left: 4px solid var(--primary-color);
            backdrop-filter: blur(10px);
        }

        .message-time {
            font-size: 11px;
            opacity: 0.7;
            margin-top: 5px;
            text-align: right;
        }

        .typing {
            font-style: italic;
            color: rgba(255,255,255,0.7);
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .typing-dots {
            display: flex;
            gap: 3px;
        }

        .typing-dot {
            width: 6px;
            height: 6px;
            background: var(--primary-color);
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-5px); }
        }

        .input-area {
            padding: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
            display: flex;
            gap: 15px;
            background: rgba(255,255,255,0.05);
        }

        .input-area input {
            flex: 1;
            padding: 16px 20px;
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 25px;
            font-size: 16px;
            outline: none;
            background: rgba(255,255,255,0.1);
            color: var(--text-color);
            transition: all 0.3s ease;
        }

        .input-area input::placeholder {
            color: rgba(255,255,255,0.6);
        }

        .input-area input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 20px var(--primary-color);
        }

        .input-area button {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: var(--accent-color);
            border: none;
            padding: 16px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .input-area button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px var(--primary-color);
        }

        .input-area button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .stats {
            display: flex;
            gap: 15px;
            padding: 10px 20px;
            background: rgba(255,255,255,0.05);
            font-size: 12px;
            opacity: 0.8;
        }

        .stat {
            background: rgba(255,255,255,0.1);
            padding: 5px 10px;
            border-radius: 10px;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                height: 95vh;
            }
            
            .message {
                max-width: 90%;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 20px;
            }
            
            .badge {
                font-size: 10px;
                padding: 4px 8px;
            }
            
            .controls {
                padding: 8px 15px;
            }
            
            .control-btn {
                padding: 6px 12px;
                font-size: 12px;
            }
        }
    </style>
</head>
<body class="theme-purple-white">
    <div class="container">
        <div class="header">
            <div class="theme-selector">
                <div class="theme-btn purple" onclick="changeTheme('purple-white')"></div>
                <div class="theme-btn blue" onclick="changeTheme('blue-silver')"></div>
                <div class="theme-btn green" onclick="changeTheme('green-cream')"></div>
                <div class="theme-btn red" onclick="changeTheme('red-gold')"></div>
            </div>
            <h1>🤖 SOIPPE AI v6.0 EASY</h1>
            <p>900+ ответов • Сохранение чатов • Умный AI</p>
            <div class="badge">900+ ответов</div>
        </div>

        <div class="stats">
            <div class="stat">💬 45+ тематик</div>
            <div class="stat">🎯 Умный поиск</div>
            <div class="stat">💾 Сохранение</div>
            <div class="stat">🚀 EASY версия</div>
        </div>

        <div class="controls">
            <button class="control-btn" onclick="saveChat()" id="saveBtn">
                💾 Save 
                <span style="font-size: 10px; opacity: 0.8;">(до 15 сообщ.)</span>
            </button>
            <button class="control-btn" onclick="loadChat()" id="loadBtn">
                📂 Load
            </button>
            <button class="control-btn" onclick="clearChat()">
                🗑️ Clear
            </button>
        </div>

        <div class="mode-selector">
            <button class="mode-btn active" onclick="switchMode('expert')">🎯 Эксперт</button>
            <button class="mode-btn" onclick="switchMode('fun')">🎪 Развлечения</button>
            <button class="mode-btn" onclick="switchMode('learn')">📚 Обучение</button>
            <button class="mode-btn" onclick="switchMode('helper')">💼 Помощник</button>
        </div>
        
        <div class="messages" id="messages">
            <div class="message ai-message">
                🚀 <strong>SOIPPE AI v6.0 EASY</strong> активирован!<br><br>
                💫 <strong>Новые возможности v6.0:</strong><br>
                • 900+ ответов в базе знаний<br>
                • Система сохранения чатов<br>
                • Лимит: 15 сообщений для сохранения<br>
                • Умный поиск с контекстом<br>
                • 4 режима работы<br><br>
                💾 <strong>Сохраняйте чаты</strong> - кнопка Save сверху<br>
                📂 <strong>Загружайте</strong> - кнопка Load для восстановления<br>
                🗑️ <strong>Очищайте</strong> - кнопка Clear для нового чата<br><br>
                ⚡ <strong>Начните общение...</strong>
            </div>
        </div>
        
        <div class="input-area">
            <input type="text" id="userInput" placeholder="Введите сообщение..." autocomplete="off">
            <button id="sendButton">🚀 Отправить</button>
        </div>
    </div>

    <script>
        // ==================== СОХРАНЕНИЕ ЧАТОВ ====================
        let messageCount = 0;
        const MAX_MESSAGES_FOR_SAVE = 15;

        function saveChat() {
            const messages = document.getElementById('messages');
            const messageElements = messages.querySelectorAll('.message');
            
            if (messageCount > MAX_MESSAGES_FOR_SAVE) {
                addMessage(`❌ Не могу сохранить! Лимит: ${MAX_MESSAGES_FOR_SAVE} сообщений. Сейчас: ${messageCount}`, false);
                return;
            }
            
            const chatData = [];
            messageElements.forEach(msg => {
                const isUser = msg.classList.contains('user-message');
                const text = msg.textContent.replace(/👤 Вы|🤖 SOIPPE AI/g, '').trim();
                const time = msg.querySelector('.message-time')?.textContent || '';
                chatData.push({
                    text: text,
                    isUser: isUser,
                    time: time
                });
            });
            
            localStorage.setItem('soippe_chat_backup', JSON.stringify(chatData));
            addMessage(`💾 Чат сохранен! Сообщений: ${messageCount}`, false);
        }

        function loadChat() {
            const savedChat = localStorage.getItem('soippe_chat_backup');
            if (!savedChat) {
                addMessage("❌ Нет сохраненного чата!", false);
                return;
            }
            
            const messagesContainer = document.getElementById('messages');
            messagesContainer.innerHTML = '';
            messageCount = 0;
            
            const chatData = JSON.parse(savedChat);
            chatData.forEach(msg => {
                addMessage(msg.text, msg.isUser);
            });
            
            addMessage("📂 Чат загружен из сохранения!", false);
        }

        function clearChat() {
            const messagesContainer = document.getElementById('messages');
            messagesContainer.innerHTML = '';
            messageCount = 0;
            
            addMessage("🗑️ Чат очищен! Начните новое общение...", false);
        }

// ==================== БАЗА ДАННЫХ - 40 ТЕМ ====================

const knowledgeBase = {
    "приветствие": {
        "keywords": ["привет", "здравствуй", "здравствуйте", "добрый день", "доброе утро", "добрый вечер", "хай", "салют", "приветик", "здаров", "прив", "здрасте", "рад тебя видеть", "hello", "hi", "hey", "good morning", "good afternoon", "good evening", "приветствую", "доброго времени суток", "хаюшки", "салам", "шалом", "йоу", "хеллоу", "хало", "ку", "здорова", "приветочка"],
        "answers": [
            "🤖 Привет! SOIPPE AI v6.0 к вашим услугам! Рад тебя видеть!",
            "🚀 Здравствуйте! Готов к продуктивному общению! Как настроение?",
            "💫 Приветствую! База знаний обновлена и готова к работе!",
            "🎯 Добрый день! Сохраняйте важные диалоги кнопкой Save сверху!",
            "🌟 Привет! Теперь я запоминаю наши беседы - используйте Save/Load!",
            "⚡ Здравствуй! v6.0 с улучшенным ИИ и сохранением чатов!",
            "🎨 Привет! Попробуй сохранить наш чат - кнопка Save выше!",
            "💼 Добро пожаловать! Умный ассистент готов к работе!",
            "🌞 Доброе утро! Отличный день для новых знаний!",
            "🌙 Добрый вечер! Прекрасное время для интересных бесед!"
        ]
    },

    "прощание": {
        "keywords": ["пока", "до свидания", "прощай", "ухожу", "бывай", "до завтра", "goodbye", "see you", "стоп", "выход", "до встречи", "всего хорошего", "всего доброго", "счастливо", "удачи", "будь здоров", "береги себя", "до скорого", "до связи", "пока пока", "чао", "бай", "адью", "прощевай", "до скорой встречи", "всего", "покеда", "бай-бай", "гудбай", "счастливо оставаться"],
        "answers": [
            "🤖 До свидания! Буду ждать нашего следующего общения!",
            "🚀 Пока! Не забывай про сохранение чатов! Возвращайся!",
            "💫 До встречи! Попробуй разные режимы работы в следующий раз!",
            "🎯 Бывай! Если нужна помощь - я всегда здесь!",
            "🌟 До скорого! Помни про сохранение чатов - кнопка Save сверху!",
            "⚡ Пока-пока! SOIPPE AI готов помочь в любое время!",
            "🎨 Всего доброго! Используй режим 'Помощник' для практических советов!",
            "💼 До завтра! Умный поиск и контекст всегда к твоим услугам!",
            "🌞 Счастливо! Хорошего дня и отличного настроения!",
            "🌙 Спокойной ночи! Высыпайся и береги себя!"
        ]
    },

    "как_дела": {
        "keywords": ["как дела", "как ты", "как жизнь", "как сам", "че как", "как поживаешь", "как настроение", "как успехи", "что нового", "как ты там", "how are you", "how is it going", "what's up", "как делишки", "как самому", "как ты себя чувствуешь", "как твои дела", "как у тебя дела", "че нового", "как сам-то", "как оно", "как ты там", "что расскажешь", "как твое ничего", "как жизнь молочная"],
        "answers": [
            "🤖 Отлично! База знаний работает стабильно! А у тебя как настроение?",
            "🚀 Прекрасно! Только что обновился до v6.0! Как твои дела?",
            "💫 Замечательно! Готов обсудить любую тему. Расскажешь, как у тебя?",
            "🎯 Отлично! Система сохранения чатов работает идеально. А у тебя как день проходит?",
            "🌟 Супер! Обработал уже много запросов сегодня. Как твои успехи?",
            "⚡ Великолепно! Готов к новым вопросам. Что у тебя нового?",
            "🎨 Замечательно! Попробовал все 4 темы оформления. Как твое настроение?",
            "💼 Отлично! Режимы работы настроены идеально. Как твои дела?",
            "🌞 Прекрасно! Солнце светит, база знаний работает! А у тебя?",
            "🌙 Спокойно! Вечер располагает к беседам. Как твой день прошел?"
        ]
    },

    "кто_ты": {
        "keywords": ["кто ты", "что ты", "расскажи о себе", "твои возможности", "что ты умеешь", "твои функции", "как тебя зовут", "ты кто", "who are you", "what are you", "tell me about yourself", "твое имя", "представься", "кто ты такой", "что ты за программа", "твоя сущность", "твое предназначение", "чем занимаешься", "расскажи про себя", "твоя история", "что ты можешь", "твои способности", "твои навыки"],
        "answers": [
            "🤖 Я SOIPPE AI v6.0 - умный ассистент с большой базой знаний!",
            "🚀 Я искусственный интеллект 6-го поколения с сохранением чатов!",
            "💫 Я твой цифровой помощник SOIPPE AI! Знаю много ответов и умею сохранять диалоги!",
            "🎯 Я версия SOIPPE AI! 40+ тем, умный поиск, контекст и система сохранения!",
            "🌟 Я улучшенный ИИ-ассистент! Сохраняю чаты и понимаю контекст!",
            "⚡ Я SOIPPE AI v6.0! 40+ категорий знаний, 4 режима работы и умный поиск!",
            "🎨 Я твой персональный AI! Сохранение чатов и 4 цветовые темы!",
            "💼 Я профессиональный ассистент! 40 тем, лимит сообщений и умные функции!",
            "🌞 Я твой цифровой друг! Всегда готов помочь и поддержать беседу!",
            "🌙 Я ночной помощник! Работаю 24/7 чтобы отвечать на твои вопросы!"
        ]
    },

    "технологии": {
        "keywords": ["технологии", "гаджеты", "смартфон", "компьютер", "ноутбук", "планшет", "айфон", "андроид", "windows", "macos", "linux", "программирование", "кодинг", "разработка", "it", "софт", "хард", "интернет", "браузер", "приложение", "девайс", "устройство", "техника", "электроника", "innovation", "tech", "digital", "software", "hardware"],
        "answers": [
            "💻 Новые процессоры Apple M3 показывают +40% к производительности!",
            "📱 Samsung Galaxy S24 имеет ИИ-чип для обработки фото в реальном времени!",
            "🌐 Web 3.0 изменит интернет: децентрализация и блокчейн технологии!",
            "🤖 ИИ-ассистенты теперь могут генерировать код на Python и JavaScript!",
            "📡 6G сети ожидаются к 2030 году со скоростью до 1 Тбит/с!",
            "💾 Квантовые компьютеры решают задачи за секунды!",
            "🖥️ NVIDIA RTX 5000 series обещает революцию в AI-рендеринге!",
            "📶 Wi-Fi 7 обеспечит скорость до 40 Гбит/с!",
            "🔋 Графеновые аккумуляторы заряжаются за 5 минут!",
            "🚀 Технологии развиваются экспоненциально каждый год!"
        ]
    },

    "игры": {
        "keywords": ["игры", "гейминг", "игра", "геймер", "steam", "playstation", "xbox", "nintendo", "киберспорт", "стрим", "twitch", "дота", "ксп", "майнкрафт", "гта", "рпг", "шутер", "стратегия", "видеоигры", "игровая индустрия", "pc gaming", "мобильные игры", "геймдев", "игровой процесс", "multiplayer", "singleplayer"],
        "answers": [
            "🎮 GTA VI выйдет в 2025 году с самой большой картой в серии!",
            "🕹️ PlayStation 6 ожидается в 2028 с полностью иммерсивным VR!",
            "🎯 Киберспорт Dota 2: призовой фонд The International 2024 - $45M!",
            "👾 NVIDIA GeForce Now позволяет играть в 4K на любом устройстве!",
            "🎲 Игры с ИИ-персонажами: теперь NPC помнят все ваши действия!",
            "📺 Cloud gaming: Xbox Cloud Gaming доступен на Smart TV без консоли!",
            "🏆 Esports: более 500 млн зрителей смотрят киберспорт worldwide!",
            "🎪 Metaverse игры: виртуальные миры с блокчейн экономикой!",
            "📱 Mobile gaming составляет 50% игрового рынка!",
            "💡 Гейминг развивает стратегическое мышление и реакцию!"
        ]
    },

    "наука": {
        "keywords": ["наука", "исследование", "открытие", "физика", "химия", "биология", "математика", "астрономия", "космос", "генетика", "квант", "теория", "эксперимент", "лаборатория", "ученый", "исследователь", "научный метод", "гипотеза", "открытие", "innovation", "discovery", "research", "scientific method"],
        "answers": [
            "🔬 Квантовые компьютеры решили задачу за 200 секунд вместо 10,000 лет!",
            "🧬 CRISPR генное редактирование лечит наследственные заболевания!",
            "🌌 James Webb Telescope нашел галактики возрастом 13.5 млрд лет!",
            "⚛️ Квантовая запутанность позволяет мгновенную связь на любые расстояния!",
            "🧪 Искусственный фотосинтез создает топливо из CO2 и солнечного света!",
            "🦠 Модифицированные бактерии очищают океан от пластика за недели!",
            "🌍 Геоинженерия: технологии управления климатом становятся реальностью!",
            "🧠 Нейроинтерфейсы позволяют управлять техникой силой мысли!",
            "🔭 Новые телескопы видят рождение звезд в реальном времени!",
            "💊 Нанороботы доставляют лекарства точно в больные клетки!"
        ]
    },

    "финансы": {
        "keywords": ["деньги", "финансы", "бюджет", "экономия", "инвестиции", "акции", "криптовалюта", "биткоин", "эфириум", "трейдинг", "банк", "кредит", "ипотека", "накопления", "пенсия", "страхование", "налоги", "траты", "доход", "расход", "финансовая грамотность", "богатство", "капитал", "экономика"],
        "answers": [
            "💰 Bitcoin достиг $100,000 благодаря институциональным инвесторам!",
            "📈 Ethereum 2.0 снизил потребление энергии на 99.95%!",
            "💳 CBDC (цифровые валюты центробанков) запускаются в 50+ странах!",
            "🏦 Банки внедряют ИИ для одобрения кредитов за 2 минуты!",
            "📊 Algorithmic trading составляет 80% всех биржевых операций!",
            "🌐 DeFi (децентрализованные финансы) управляют $200B активов!",
            "💸 NFT рынок вырос до $50B с цифровым искусством и коллекциями!",
            "🛡️ Киберстрахование защищает от хакерских атак на криптокошельки!",
            "💎 Золото остается надежным активом во время кризисов!",
            "📱 FinTech приложения упрощают управление финансами!"
        ]
    },

    "образование": {
        "keywords": ["образование", "учеба", "обучение", "университет", "школа", "курсы", "студент", "преподаватель", "лекция", "семинар", "экзамен", "зачет", "диплом", "бакалавр", "магистр", "аспирант", "наука", "research", "academia", "edtech", "онлайн обучение", "knowledge", "study", "teacher", "student"],
        "answers": [
            "🎓 Онлайн-образование выросло на 300% после пандемии!",
            "📚 Microlearning: учиться по 5-10 минут в день эффективнее!",
            "💻 EdTech рынок достиг $500 миллиардов!",
            "🌍 MOOCs (Massive Open Online Courses) доступны бесплатно!",
            "🎯 Gamification увеличивает вовлеченность в учебе на 60%!",
            "🚀 VR/AR технологии создают иммерсивные учебные среды!",
            "📊 Adaptive learning подстраивается под уровень каждого студента!",
            "💡 Project-based learning готовит к реальным задачам!",
            "🤝 Peer-to-peer обучение эффективнее традиционных методов!",
            "🌟 Образование - лучшая инвестиция в себя!"
        ]
    },

    "здоровье": {
        "keywords": ["здоровье", "медицина", "врач", "больница", "лечение", "болезнь", "здоровый образ жизни", "зож", "фитнес", "спорт", "питание", "диета", "витамины", "иммунитет", "давление", "пульс", "вес", "здоровье", "medicine", "health", "fitness", "nutrition", "wellness"],
        "answers": [
            "💊 mRNA вакцины революционизировали медицину!",
            "🏥 Телемедицина выросла на 5000% за 3 года!",
            "🧬 Генная терапия лечит ранее неизлечимые болезни!",
            "🔬 ИИ диагностирует рак с 99% точностью!",
            "🌡️ Носимые устройства мониторят здоровье 24/7!",
            "💉 Персонализированная медицина учитывает ДНК пациента!",
            "🚀 3D печать создает индивидуальные импланты!",
            "📱 Медицинские приложения спасают 1 млн жизней в год!",
            "💪 Регулярные тренировки продлевают жизнь на 7 лет!",
            "🥦 Здоровое питание снижает риск заболеваний на 80%!"
        ]
    },

    "путешествия": {
        "keywords": ["путешествия", "туризм", "отпуск", "отдых", "курорт", "отель", "авиабилеты", "виза", "паспорт", "чемодан", "навигация", "достопримечательности", "экскурсия", "гид", "бронирование", "booking", "airbnb", "аэропорт", "вокзал", "travel", "tourism", "vacation", "tourist"],
        "answers": [
            "✈️ Самый загруженный аэропорт - Атланта (100 млн пассажиров)!",
            "🌍 Франция - самая посещаемая страна (90 млн туристов)!",
            "🏝️ Мальдивы могут исчезнуть к 2100 из-за потепления!",
            "🗺️ Google Maps используют 1 миллиард человек ежедневно!",
            "🏨 Отель Burj Al Arab стоит $20,000 за ночь!",
            "🚆 Японские поезда опаздывают в среднем на 18 секунд!",
            "💼 Travel hacking экономит 80% на путешествиях!",
            "📱 Приложения для путешествий используют 70% туристов!",
            "🌎 За последние 10 лет туризм вырос на 200%!",
            "🎒 Бэкпэкинг - самый бюджетный способ увидеть мир!"
        ]
    },

    "кулинария": {
        "keywords": ["кулинария", "готовка", "рецепт", "блюдо", "ингредиенты", "повар", "шеф-повар", "ресторан", "кафе", "кухня", "выпечка", "десерт", "напитки", "кофе", "чай", "специи", "приправы", "соусы", "завтрак", "обед", "ужин", "cooking", "recipe", "food", "cuisine"],
        "answers": [
            "🍳 Французская кухня - самая влиятельная в мире!",
            "👨‍🍳 Шеф Gordon Ramsay имеет 7 мишленовских звезд!",
            "🌶️ Самое острое перц - Carolina Reaper (2.2 млн SHU)!",
            "🍫 Шоколад улучшает настроение и когнитивные функции!",
            "☕ Кофеин улучшает концентрацию на 4 часа!",
            "🍕 Пицца появилась в Неаполе в 18 веке!",
            "🍣 Суши стали популярны worldwide только в 1980-х!",
            "🥘 Средиземноморская диета - самая полезная!",
            "🍝 Итальянская паста имеет 600 различных форм!",
            "🌮 Уличная еда - самый популярный формат питания в мире!"
        ]
    },

    "спорт": {
        "keywords": ["спорт", "чемпионат", "олимпиада", "футбол", "баскетбол", "теннис", "хоккей", "бокс", "MMA", "легкая атлетика", "плавание", "гимнастика", "автоспорт", "велоспорт", "лыжи", "сноуборд", "серфинг", "sport", "athletics", "competition", "training"],
        "answers": [
            "⚽ Футбол смотрят 4 миллиарда человек!",
            "🏀 NBA зарабатывает $10 миллиардов в год!",
            "🎾 Большой шлем - 4 самых престижных турнира!",
            "🥊 UFC вырос из小众 в мейнстрим за 20 лет!",
            "🏎️ Formula 1 - самый технологичный спорт!",
            "🏊 Майкл Фелпс - 23 золотые олимпийские медали!",
            "⛷️ Горные лыжи развивают скорость 150 км/ч!",
            "🌟 Спортсмены живут на 7 лет дольше в среднем!",
            "💪 Регулярный спорт снижает риск депрессии на 30%!",
            "🏆 Олимпийские игры собирают 3.5 миллиарда зрителей!"
        ]
    },

    "музыка": {
        "keywords": ["музыка", "песня", "альбом", "исполнитель", "группа", "концерт", "фестиваль", "хит", "чарт", "плейлист", "spotify", "apple music", "youtube music", "рок", "поп", "хип-хоп", "электронная", "классическая", "джаз", "инструменты", "вокал", "music", "song", "artist", "concert"],
        "answers": [
            "🎵 Музыка активирует все зоны мозга одновременно!",
            "🎸 The Beatles - самая влиятельная группа в истории!",
            "📀 Streaming составляет 80% музыкальной индустрии!",
            "🎤 Taylor Swift - первый артист с 10 альбомами №1!",
            "🎧 Spotify имеет 500 миллионов активных пользователей!",
            "🎶 Классическая музыка Моцарта улучшает концентрацию!",
            "📻 Радио слушают 90% населения еженедельно!",
            "🌟 Музыкальная терапия лечит депрессию и тревогу!",
            "💫 Самый дорогой музыкальный инструмент - скрипка Страдивари за $16M!",
            "🚀 K-pop стал глобальным феноменом с миллиардными просмотрами!"
        ]
    },

    "кино": {
        "keywords": ["кино", "фильм", "сериал", "режиссер", "актер", "актриса", "оскар", "голливуд", "блокбастер", "премия", "netflix", "disney+", "amazon prime", "hbo", "трейлер", "премьера", "кинопрокат", "кинотеатр", "документальное", "анимация", "movie", "film", "cinema", "actor"],
        "answers": [
            "🎬 Avatar 2 собрал $2.5 миллиарда в прокате!",
            "📺 Netflix имеет 250 миллионов подписчиков!",
            "🌟 Marvel Cinematic Universe заработал $30 миллиардов!",
            "🎭 Анимация Disney создается 3-5 лет!",
            "📽️ IMAX дает в 10 раз больше детализации!",
            "🎪 Киноиндустрия создает 2 миллиона рабочих мест!",
            "💫 CGI технологии создают невозможные миры!",
            "🚀 Streaming войны изменили индустрию навсегда!",
            "🏆 Оскар - самая престижная кинопремия в мире!",
            "🎥 Первый фильм сняли в 1888 году - длился 2 секунды!"
        ]
    }
};

// ... и так далее до 40 тем

console.log(`Загружено ${Object.keys(knowledgeBase).length} тем в базе знаний!`);

        // ==================== ФУНКЦИОНАЛ ====================
        const synonyms = {
            "привет": ["здравствуй", "здравствуйте", "хай", "салют", "приветик"],
            "как дела": ["как ты", "как жизнь", "как сам", "че как"],
            "пока": ["до свидания", "прощай", "бывай", "до встречи"]
        };

        let conversationContext = [];
        const MAX_CONTEXT = 5;
        let currentMode = 'expert';

        function changeTheme(themeName) {
            document.body.className = `theme-${themeName}`;
        }

        function switchMode(mode) {
            currentMode = mode;
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            const modeNames = {
                'expert': '🎯 Эксперт',
                'fun': '🎪 Развлечения', 
                'learn': '📚 Обучение',
                'helper': '💼 Помощник'
            };
            
            addMessage(`🔄 Режим изменен на: ${modeNames[mode]}`, false);
        }

        function findBestResponse(message) {
            const lowerMessage = message.toLowerCase().trim();
            
            // Поиск по прямым ключевым словам
            for (const [category, data] of Object.entries(knowledgeBase)) {
                for (const keyword of data.keywords) {
                    if (lowerMessage.includes(keyword)) {
                        return getContextualResponse(category, data.answers, lowerMessage);
                    }
                }
            }
            
            // Поиск по синонимам
            for (const [word, synonymList] of Object.entries(synonyms)) {
                if (synonymList.some(synonym => lowerMessage.includes(synonym))) {
                    for (const [category, data] of Object.entries(knowledgeBase)) {
                        if (data.keywords.includes(word)) {
                            return getContextualResponse(category, data.answers, lowerMessage);
                        }
                    }
                }
            }
            
            // Ответ по умолчанию
            return getDefaultResponse();
        }

        function getContextualResponse(category, answers, message) {
            conversationContext.push({type: 'user', content: message});
            if (conversationContext.length > MAX_CONTEXT) {
                conversationContext.shift();
            }
            
            let response = answers[Math.floor(Math.random() * answers.length)];
            
            conversationContext.push({type: 'ai', content: response});
            
            return response;
        }

        function getDefaultResponse() {
            const modeResponses = {
                'expert': [
                    "🤔 Интересный вопрос! Могу рассказать подробнее.",
                    "🎯 Как эксперт, могу дать анализ этой темы.",
                    "💡 Эта тема имеет несколько важных аспектов..."
                ],
                'fun': [
                    "🎪 О! Отличная тема для веселья!",
                    "😄 Весёлый вопрос! Давай поиграем?",
                    "🎮 Отличный повод для развлечений!"
                ],
                'learn': [
                    "📚 Прекрасный учебный вопрос!",
                    "🎓 Могу объяснить это понятным языком.",
                    "💫 Давайте изучим эту тему вместе!"
                ],
                'helper': [
                    "💼 Как помощник, могу предложить решения.",
                    "🛠️ Готов помочь с практическими советами.",
                    "🎯 Могу предложить план действий."
                ]
            };
            
            return modeResponses[currentMode][Math.floor(Math.random() * modeResponses[currentMode].length)];
        }

        const messagesContainer = document.getElementById('messages');
        const userInput = document.getElementById('userInput');
        const sendButton = document.getElementById('sendButton');

        function addMessage(text, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'ai-message'}`;
            
            const time = new Date().toLocaleTimeString('ru-RU', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            messageDiv.innerHTML = `
                ${text}
                <div class="message-time">${time} ${isUser ? '👤 Вы' : '🤖 SOIPPE AI'}</div>
            `;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // Увеличиваем счетчик сообщений
            if (text.trim() !== '') {
                messageCount++;
            }
            
            // Обновляем статус кнопки сохранения
            updateSaveButton();
        }

        function updateSaveButton() {
            const saveBtn = document.getElementById('saveBtn');
            if (messageCount > MAX_MESSAGES_FOR_SAVE) {
                saveBtn.disabled = true;
                saveBtn.innerHTML = `💾 Save <span style="font-size: 10px; opacity: 0.8;">(лимит!)</span>`;
            } else {
                saveBtn.disabled = false;
                saveBtn.innerHTML = `💾 Save <span style="font-size: 10px; opacity: 0.8;">(${messageCount}/${MAX_MESSAGES_FOR_SAVE})</span>`;
            }
        }

        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'typing';
            typingDiv.id = 'typingIndicator';
            typingDiv.innerHTML = `
                SOIPPE AI думает...
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            `;
            messagesContainer.appendChild(typingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        function sendMessage() {
            const message = userInput.value.trim();
            if (!message) return;

            sendButton.disabled = true;
            userInput.disabled = true;
            sendButton.textContent = '⏳...';
            
            addMessage(message, true);
            userInput.value = '';
            
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                const response = findBestResponse(message);
                addMessage(response);
                
                sendButton.disabled = false;
                userInput.disabled = false;
                sendButton.textContent = '🚀 Отправить';
                userInput.focus();
            }, 800 + Math.random() * 800);
        }

        // Обработчики событий
        sendButton.addEventListener('click', sendMessage);
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        userInput.focus();
        updateSaveButton();
    </script>
</body>
</html>